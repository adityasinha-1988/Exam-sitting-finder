<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUJ Exam Seating Portal</title>
    <link rel="icon" href="https://manipal.edu/content/dam/manipal/muj/images/favicon.ico" type="image/x-icon">
    <style>
        /* --- CSS STYLES --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; display: flex; flex-direction: column; align-items: center; padding: 20px; min-height: 95vh; margin: 0; }
        .main-wrapper { flex: 1; width: 100%; display: flex; justify-content: center; align-items: flex-start; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.12); max-width: 480px; width: 100%; text-align: center; margin-top: 20px; }
        
        /* LOGO */
        .logo-img { width: 200px; margin-bottom: 20px; }
        
        h2 { color: #333; margin-bottom: 25px; font-weight: 600; letter-spacing: 0.5px; }
        
        /* INPUTS */
        input { width: 90%; padding: 14px; margin: 10px 0; border: 2px solid #eee; border-radius: 8px; font-size: 16px; transition: 0.3s; background: #fafafa; }
        input:focus { border-color: #e67e22; outline: none; background: #fff; }
        
        button { width: 96%; padding: 14px; background-color: #e67e22; color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 15px; box-shadow: 0 4px 6px rgba(230, 126, 34, 0.2); }
        button:hover { background-color: #d35400; transform: translateY(-2px); }
        
        /* RESULT BOX */
        #result { margin-top: 25px; display: none; text-align: left; background: #fff8e1; padding: 20px; border-radius: 10px; border-left: 5px solid #ffc107; animation: fadeIn 0.5s; }
        .info-row { display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px dashed #d9d9d9; padding-bottom: 8px; }
        .label { font-weight: 600; color: #555; }
        
        /* MAP CONTAINER */
        .room-container { 
            margin-top: 35px; display: none; position: relative; 
            border: 4px solid #444; border-left: 8px solid #444; /* Walls */
            padding: 60px 20px 25px 45px; border-radius: 8px; background: #fff; 
            width: fit-content; margin-left: auto; margin-right: auto; box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            animation: slideUp 0.5s;
        }
        
        .board { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 5px 30px; border-radius: 4px; font-size: 12px; letter-spacing: 1px; }
        
        /* SEATS GRID */
        .grid { display: grid; grid-template-columns: repeat(6, 42px); grid-template-rows: repeat(5, 42px); gap: 10px; justify-content: center; }
        .seat { width: 42px; height: 42px; background-color: #e9ecef; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #777; cursor: default; border: 1px solid #dee2e6; }
        
        /* DOORS (LEFT SIDE) */
        .door { position: absolute; width: 6px; height: 40px; background-color: #c0392b; left: -10px; z-index: 10; border-radius: 2px; }
        .door-label { position: absolute; font-size: 10px; color: #c0392b; font-weight: 800; left: -50px; width: 45px; text-align: right; letter-spacing: 0.5px; }
        
        .door-entry { top: 70px; } .lbl-entry { top: 82px; }
        .door-exit { bottom: 70px; } .lbl-exit { bottom: 82px; }

        /* ANIMATION & ERROR */
        .highlight { background-color: #27ae60 !important; color: white !important; font-weight: bold; box-shadow: 0 0 15px rgba(39, 174, 96, 0.8); animation: pulse 1.5s infinite; border: 1px solid #219150 !important; transform: scale(1.1); }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(39, 174, 96, 0); } 100% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .error { color: #c0392b; margin-top: 15px; display: none; font-weight: 600; background: #f8d7da; padding: 12px; border-radius: 6px; border: 1px solid #f5c6cb; }

        /* FOOTER */
        footer { margin-top: 40px; text-align: center; font-size: 14px; color: #6c757d; padding: 25px 0; width: 100%; border-top: 1px solid #e9ecef; background: #fff; }
        footer strong { color: #e67e22; }
        .github-btn { display: inline-flex; align-items: center; margin-top: 10px; padding: 6px 12px; background-color: #24292e; color: white; border-radius: 6px; text-decoration: none; font-size: 13px; font-weight: 600; transition: 0.3s; }
        .github-btn:hover { background-color: #444; }
        .github-btn svg { fill: white; margin-right: 6px; }
    </style>
</head>
<body>

<div class="main-wrapper">
    <div class="container">
        <img src="logo.jpg" alt="Manipal University Jaipur" class="logo-img">
        
        <h2>CSE Exam Seating Search</h2>
        <input type="text" id="regInput" placeholder="Enter Registration No. (e.g., 229301029)">
        <input type="text" id="courseInput" placeholder="Enter Course Code (e.g., CSE2101)">
        <button onclick="findSeat()">Find My Seat</button>
        <p class="error" id="errorMsg">Record not found! Please check your inputs.</p>

        <div id="result">
            <div class="info-row"><span class="label">Room Number:</span> <span id="resRoom" style="font-weight:bold; font-size:1.4em; color:#c0392b;">-</span></div>
            <div class="info-row"><span class="label">Seat Number:</span> <span id="resSeat" style="font-weight:bold; font-size:1.2em; color:#0056b3;">-</span></div>
        </div>

        <div class="room-container" id="visualMap">
            <div class="board">WHITEBOARD</div>
            
            <div class="door door-entry"></div><div class="door-label lbl-entry">ENTRY</div>
            <div class="door door-exit"></div><div class="door-label lbl-exit">EXIT</div>

            <div class="grid" id="seatGrid"></div>
        </div>
    </div>
</div>

<footer>
    <p>Â© <span id="currYear"></span> Manipal University Jaipur. Exam Portal.</p>
    <p>Developed & Designed by <strong>Aditya Sinha</strong></p>
    
    <a href="https://github.com/adityasinha-1988/CSE-Exam-sitting-finder" target="_blank" class="github-btn">
        <svg height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
        View on GitHub
    </a>
</footer>

<script src="student_data.js"></script>

<script>
    // Footer Year Update
    document.getElementById('currYear').innerText = new Date().getFullYear();

    // Ab hum 'studentData' yahan dobara nahi likhenge, kyunki wo upar wali file se aa raha hai.

    // Create Grid
    const grid = document.getElementById('seatGrid');
    for (let r = 1; r <= 5; r++) {
        for (let c = 1; c <= 6; c++) {
            let seatDiv = document.createElement('div');
            seatDiv.classList.add('seat');
            seatDiv.id = `R${r}-C${c}`;
            grid.appendChild(seatDiv);
        }
    }

    function findSeat() {
        const reg = document.getElementById('regInput').value.trim();
        const course = document.getElementById('courseInput').value.trim().toUpperCase();
        const errorMsg = document.getElementById('errorMsg');
        const resultBox = document.getElementById('result');
        const visualMap = document.getElementById('visualMap');

        // Reset
        document.querySelectorAll('.seat').forEach(s => { s.classList.remove('highlight'); s.innerText = ""; });
        errorMsg.style.display = 'none'; resultBox.style.display = 'none'; visualMap.style.display = 'none';

        if (!reg || !course) { alert("Please enter both Registration No and Course Code"); return; }

        // Check if studentData exists
        if (typeof studentData === 'undefined') {
            alert("Error: Data file load nahi hui! Page refresh karein ya check karein ki 'student_data.js' file uploaded hai.");
            return;
        }

        const found = studentData.find(s => s.reg === reg && s.course.toUpperCase() === course);

        if (found) {
            document.getElementById('resRoom').innerText = found.room;
            document.getElementById('resSeat').innerText = found.seat;
            resultBox.style.display = 'block';
            visualMap.style.display = 'block';
            
            // Scroll to view
            setTimeout(() => { resultBox.scrollIntoView({ behavior: 'smooth', block: 'center' }); }, 100);

            let seatID = found.seat.split(' ')[0];
            const targetSeat = document.getElementById(seatID);
            if (targetSeat) {
                targetSeat.classList.add('highlight');
                targetSeat.innerText = "YOU";
            }
        } else {
            errorMsg.style.display = 'block';
        }
    }
</script>
</body>
</html>


